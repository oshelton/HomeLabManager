<Window
	x:Class="HomeLabManager.Manager.MainWindow"
	xmlns="https://github.com/avaloniaui"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:i="using:Avalonia.Xaml.Interactivity"
	xmlns:ia="using:Avalonia.Xaml.Interactions.Core"
	xmlns:ic="using:Avalonia.Xaml.Interactions.Custom"
	xmlns:local="using:HomeLabManager.Manager"
	xmlns:materialControls="using:Material.Styles.Controls"
	xmlns:materialIcons="using:Material.Icons.Avalonia"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:pages="using:HomeLabManager.Manager.Pages"
	x:Name="window"
	Title="Home Lab Manager"
	MinWidth="800"
	MinHeight="600"
	mc:Ignorable="d">
	<Window.Resources>
		<ResourceDictionary>
			<ResourceDictionary.MergedDictionaries>
				<ResourceInclude Source="/Pages/Home/HomePage.axaml" />
				<ResourceInclude Source="/Pages/Settings/SettingsPage.axaml" />
			</ResourceDictionary.MergedDictionaries>
		</ResourceDictionary>
	</Window.Resources>

	<Window.DataContext>
		<local:MainWindowViewModel />
	</Window.DataContext>

	<i:Interaction.Behaviors>
		<ia:EventTriggerBehavior EventName="Loaded">
			<ia:CallMethodAction MethodName="WindowLoaded" TargetObject="{Binding}" />
		</ia:EventTriggerBehavior>
	</i:Interaction.Behaviors>

	<DockPanel Margin="24">
		<DockPanel DockPanel.Dock="Top">
			<materialControls:FloatingButton
				Name="backButton"
				Margin="0,0,8,0"
				Classes="Mini"
				ClickMode="Release"
				IsEnabled="{Binding NavigationService.CanNavigateBack}"
				ToolTip.Tip="Navigate to the previous page.">
				<i:Interaction.Behaviors>
					<ia:EventTriggerBehavior EventName="Click">
						<ia:CallMethodAction MethodName="NavigateBack" TargetObject="{Binding}" />
					</ia:EventTriggerBehavior>
				</i:Interaction.Behaviors>

				<materialIcons:MaterialIcon
					Width="32"
					Height="32"
					Kind="NavigateBefore" />
			</materialControls:FloatingButton>

			<TextBlock Classes="Headline4" Text="{Binding NavigationService.CurrentPage.Title}" />
		</DockPanel>

		<Carousel
			Name="ContentHost"
			Margin="0,24,0,0"
			DockPanel.Dock="Bottom"
			Items="{Binding NavigationService.Pages}"
			SelectedItem="{Binding NavigationService.CurrentPage}">
			<Carousel.PageTransition>
				<CrossFade Duration="0:00:00.250" />
			</Carousel.PageTransition>

			<Carousel.DataTemplates>
				<StaticResource ResourceKey="HomePageTemplate" />
				<StaticResourceExtension ResourceKey="SettingsPageTemplate" />
			</Carousel.DataTemplates>
		</Carousel>
	</DockPanel>
</Window>
